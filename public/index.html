<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Framework</title>

    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet">
    <link href="css/uiBase.css" rel="stylesheet" />
    <link href="css/uiIcons.css" rel="stylesheet" />    
</head>

<body>
    <side-bar>
        <!-- Sidebar content here -->
        <p class="logo-text">Web Framework</p>
        <nav-menu id="sideMenu"></nav-menu>
    </side-bar>
    <header-line>
        <button id="btnMinimizeSidebar" class="btn btn-icon btn-round">
            <!-- nc-minimal-right -->
            <i id="minimizeIcon" class="nc-icon nc-minimal-left text-center"></i>
        </button>
        <p class="title">Header</p>
        <div id="iconbar">
<!--            <form>
                <div class="input-group no-border">
                    <input type="text" value="" class="form-control" placeholder="Search...">
                    <div class="input-group-append">
                        <div class="input-group-text">
                            <i class="nc-icon nc-zoom-split"></i>
                        </div>
                    </div>
                </div>
            </form>
            <a class="nav-link btn-magnify" href="javascript:;">
                <i class="nc-icon nc-layout-11"></i>
                <p>
                    <span class="d-lg-none d-md-block">Stats</span>
                </p>
            </a>
            <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="nc-icon nc-bell-55"></i>
                <p>
                    <span class="d-lg-none d-md-block">Some Actions</span>
                </p>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else here</a>
            </div>-->
            <a class="nav-link btn-rotate" href="javascript:;">
                <i class="nc-icon nc-settings-gear-65"></i>
                <p>
                    <span class="d-lg-none d-md-block">Account</span>
                </p>
            </a>

        </div>

    </header-line>
    <main-content>
        <!-- Main content here -->
        <div>

        </div>
        <ui-card class="full-size">This is the main content area.</ui-card>
    </main-content>
    <footer-line>
        Footer
    </footer-line>

    <script>

async function loadControl(controlName, destTag) {
    const url = `${window.location.protocol}//${window.location.host}/api/ui/web/control/${controlName}`;
    try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`Response status: ${response.status}`);
        }

        const json = await response.json();
        console.log(json);
        if (json.cssCode) {
            let cssArea = document.getElementById(`css_${controlName}`);
            if (!cssArea) {
                //Create new tag
            } else {
                if (cssArea.innerHTML!==json.cssCode) {
                    alert("CSS different for this control.");
                }
            }
        }
        if (json.jsCode) {
            let jsArea = document.getElementById(`js_${controlName}`);
            if (!jsArea) {
                //Create new tag
            } else {
                if (jsArea.innerHTML!==json.jsCode) {
                    alert("JS different for this control.");
                }
            }
        }
        let jsArea = document.getElementById(`js_${controlName}`);
        
        //htmlCode
        //name
        //startFunction
    } catch (error) {
        console.error(error.message);
    }
}

loadControl("uiMenu", document.getElementById('sideMenu'));
   </script>
</body>

</html>